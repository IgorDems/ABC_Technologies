---
- hosts: localhost
  become: yes
  tasks:
    - name: Build an image #and push it to a private repo
      community.docker.docker_image:
        build:
          path: "/var/jenkins-agent/workspace/ABC_AnsibleK8s"
          name: docker.io/demsdocker/abctechnologies # Specify the name here
          push: true
          source: build
        register: out
    - debug:
        var: out

    # Add your other tasks here

    # - name: start a container
    #   community.docker.docker_container:
    #     name: abc-application
    #     image: demsdocker/abctechnologies
    #     state: started
    #     ports:
    #       - "1234:8080"
    #   register: out
    # - debug:
    #     var: out

    # - name: Create a Deployment by reading the definition from a local file
    #   command: "kubectl --kubeconfig=/etc/kubernetes/admin.conf apply -f /var/jenkins-agent/workspace/ABC_AnsibleK8s/deployment.yml"
    #   register: out
    # - debug:
    #     var: out
